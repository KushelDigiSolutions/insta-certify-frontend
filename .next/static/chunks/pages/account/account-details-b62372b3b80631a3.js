(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{6345:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/account-details",function(){return a(3204)}])},3204:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return _},default:function(){return p}});var n=a(5893),o=a(7294),s=a(9008),c=a.n(s),r=a(8122),i=a.n(r);a(1664);var l=a(9755),u=a.n(l),d=a(751),m=a(347),_=!0;function p(e){var t;let[a,s]=(0,o.useState)(!1),[r,l]=(0,o.useState)(!1),[_,p]=(0,o.useState)(""),[f,h]=(0,o.useState)(""),[g,x]=(0,o.useState)(""),[v,j]=(0,o.useState)([]),[b,C]=(0,o.useState)(""),[w,N]=(0,o.useState)(""),[y,L]=(0,o.useState)(""),[A,S]=(0,o.useState)(""),[B,I]=(0,o.useState)(""),[O,P]=(0,o.useState)(""),[F,k]=(0,o.useState)(""),[T,D]=(0,o.useState)(""),E=null==e?void 0:null===(t=e.page_content)||void 0===t?void 0:t.user;(0,d.Z)();let G=async()=>{s(!0);try{let e=await fetch("".concat("https://demoadmin.mwrweb.com/api/","user-profile"),{method:"GET",headers:{Authorization:"Bearer "+E.access_token,Accept:"application/json","Content-Type":"application/json"}}),t=await e.json();if(!0==t.status){let e=t.data;C(e.name),N(e.last_name),I(e.email),e.avatar,h(e.avatar),e.company,L(e.company),e.mobile_number,S(e.mobile_number),s(!1)}else window.location.href="/logout"}catch(e){p("Something went wrong."),s(!1)}};(0,o.useEffect)(()=>{let e=u()("#profileImage");e.change(function(){let t=u()(this).val();if(""!=t){let o=t.lastIndexOf(".")+1,s=t.substr(o,t.length).toLowerCase();if("jpg"!=s&&"jpeg"!=s&&"png"!=s)return fileList.html(""),e.val(""),alert("Only images & documents files are allowed!"),!1;{var a,n;let t=null===(a=u()(this).prop("files")[0])||void 0===a?void 0:a.size;if(null===(n=u()(this).prop("files")[0])||void 0===n||n.name,!(t<=10485760))return fileList.html(""),e.val(""),alert("Too big of a file. Uploads must be under 3 MB in size."),!1;!function(){var e=document.getElementById("profileImage"),t="";j(u()("#profileImage")[0].files[0]),console.log(u()("#profileImage")[0].files[0]);for(var a=0;a<e.files.length;++a)console.log("input.files"),t+='<img src="'+window.URL.createObjectURL(e.files[a])+'" alt="'+e.files.item(a).name+'" title="'+e.files.item(a).name+'" />';u()(".uploadedImg").html(t)}()}}else fileList.html(""),e.val("")}),G()},[]);let z=async()=>{s(!0);let e=await fetch("".concat("https://demoadmin.mwrweb.com/api/","profile-update"),{method:"POST",body:JSON.stringify({name:b,last_name:w,email:B,company:y,phone_number:A,password:O,password_confirmation:F,current_password:T}),headers:{Authorization:"Bearer "+E.access_token,Accept:"application/json","Content-Type":"application/json"}}),t=await e.json();console.log("updateRes"),console.log(t),t.status,p(t.message),s(!1)};return(0,n.jsx)("div",{className:i().pageAccountBG,children:(0,n.jsxs)("div",{className:i().pageAccount,children:[(0,n.jsxs)(c(),{children:[(0,n.jsx)("title",{children:"Account Details"}),(0,n.jsx)("meta",{name:"description",content:"We're the 92d Force Support Squadron, at Fairchild Air Force Base, delivering exceptional experiences to REFUEL Airmen, their families and the Fairchild community. Join the FUN!"})]}),!0==a?(0,n.jsx)("span",{className:"loadingOverlay",style:{display:"block",position:"fixed"}}):"",(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("h1",{className:i().pageHead,children:"Account settings"}),(0,n.jsx)(m.default,{isActive:"3"}),(0,n.jsx)("div",{className:i().accountContainer,children:(0,n.jsx)("div",{className:i().formBuilder,children:(0,n.jsxs)("form",{method:"POST",onSubmit:e=>{if(e.preventDefault(),""==b)p("First Name field cannot be blank."),l(!1);else if(""==w)p("Last Name field cannot be blank."),l(!1);else if(""==B)p("You must enter a valid email."),l(!1);else{if(""!=O&&O.length<8)return p("The password must be at least 8 characters."),l(!1),!1;if(""!=O&&0>O.search(/[a-z]/i)||""!=O&&0>O.search(/[0-9]/))return p("Your password must contain at least one letter."),l(!1),!1;O!=F?(p("Password and confirm password does not match."),l(!1)):""!=O&&""!=F&&""==T?(p("Please enter the current password."),l(!1)):(p(""),l(!0),z())}},encType:"multipart/form-data",children:[(0,n.jsx)("div",{className:i().profilePhoto,style:{display:"none"},children:(0,n.jsxs)("label",{htmlFor:"profileImage",children:[(0,n.jsx)("svg",{width:"33",height:"32",viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M16.4987 8C17.9654 8 19.1654 9.2 19.1654 10.6667C19.1654 12.1333 17.9654 13.3333 16.4987 13.3333C15.032 13.3333 13.832 12.1333 13.832 10.6667C13.832 9.2 15.032 8 16.4987 8ZM16.4987 21.3333C20.0987 21.3333 24.232 23.0533 24.4987 24H8.4987C8.80536 23.04 12.912 21.3333 16.4987 21.3333ZM16.4987 5.33333C13.552 5.33333 11.1654 7.72 11.1654 10.6667C11.1654 13.6133 13.552 16 16.4987 16C19.4454 16 21.832 13.6133 21.832 10.6667C21.832 7.72 19.4454 5.33333 16.4987 5.33333ZM16.4987 18.6667C12.9387 18.6667 5.83203 20.4533 5.83203 24V26.6667H27.1654V24C27.1654 20.4533 20.0587 18.6667 16.4987 18.6667Z",fill:"#3595F6"})}),(0,n.jsx)("h4",{children:"Add A Profile Image"}),(0,n.jsx)("span",{children:"Drag and drop or choose a file to upload"}),(0,n.jsx)("input",{type:"file",name:"profileImage",id:"profileImage",value:g,accept:"image/jpeg,image/gif,image/png",onChange:e=>x(e.target.value)}),(0,n.jsx)("div",{className:i().uploadedImg+" uploadedImg",children:""!=f?(0,n.jsx)("img",{src:f,alt:"Img"}):""})]})}),""!=_?(0,n.jsx)("span",{className:i().formMessge,children:_}):"",(0,n.jsxs)("div",{className:i().formGroup,children:[(0,n.jsxs)("div",{className:i().formControl,children:[(0,n.jsxs)("label",{children:["First Name ",(0,n.jsx)("small",{children:"*"})]}),(0,n.jsx)("input",{type:"text",name:"firstName",value:b,onChange:e=>C(e.target.value),maxLength:"30"})]}),(0,n.jsxs)("div",{className:i().formControl,children:[(0,n.jsxs)("label",{children:["Last Name ",(0,n.jsx)("small",{children:"*"})]}),(0,n.jsx)("input",{type:"text",name:"lastName",value:w,onChange:e=>N(e.target.value),maxLength:"30"})]})]}),(0,n.jsxs)("div",{className:i().formGroup,children:[(0,n.jsxs)("div",{className:i().formControl,children:[(0,n.jsx)("label",{children:"Company"}),(0,n.jsx)("input",{type:"text",name:"company",value:y,onChange:e=>L(e.target.value),maxLength:"30"})]}),(0,n.jsxs)("div",{className:i().formControl,children:[(0,n.jsx)("label",{children:"Phone Number"}),(0,n.jsx)("input",{type:"text",maxLength:"13",className:"numberOnly",name:"phoneNumber",value:A,onChange:e=>S(e.target.value)})]})]}),(0,n.jsxs)("div",{className:i().formGroup,children:[(0,n.jsxs)("div",{className:i().formControl,children:[(0,n.jsxs)("label",{children:["Email Address ",(0,n.jsx)("small",{children:"*"})]}),(0,n.jsx)("input",{type:"text",name:"emailAddress",value:B,onChange:e=>I(e.target.value),maxLength:"50"})]}),(0,n.jsxs)("div",{className:i().formControl,children:[(0,n.jsx)("label",{children:"Password"}),(0,n.jsx)("input",{type:"text",name:"password",value:O,onChange:e=>P(e.target.value),maxLength:"20"})]})]}),(0,n.jsxs)("div",{className:i().formGroup,children:[(0,n.jsxs)("div",{className:i().formControl,children:[(0,n.jsx)("label",{children:"Confirm Password"}),(0,n.jsx)("input",{type:"text",name:"confirmPassword",value:F,onChange:e=>k(e.target.value),maxLength:"20"})]}),(0,n.jsxs)("div",{className:i().formControl,children:[(0,n.jsx)("label",{children:"Current Password"}),(0,n.jsx)("input",{type:"text",name:"currentPassword",value:T,onChange:e=>D(e.target.value),maxLength:"20"})]})]}),(0,n.jsx)("div",{className:i().formAction,children:(0,n.jsx)("button",{type:"submit",className:i().buttonSubmit,children:"Update Details"})})]})})})]})]})})}},347:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var n=a(5893),o=a(1664),s=a.n(o);a(7294);var c=a(8122),r=a.n(c);function i(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:r().accountNavigation,children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{className:"1"==e.isActive?r().isActive:"",children:(0,n.jsx)(s(),{href:"/account/order",children:"Orders"})}),(0,n.jsx)("li",{className:"2"==e.isActive?r().isActive:"",children:(0,n.jsx)(s(),{href:"/account/address-book",children:"Addresses"})}),(0,n.jsx)("li",{className:"3"==e.isActive?r().isActive:"",children:(0,n.jsx)(s(),{href:"/account/account-details",children:"Account Settings"})})]})})})}},751:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(9755),o=a.n(n),s=a(7294);function c(){(0,s.useEffect)(function(){o()(".numberOnly").bind("copy paste",function(e){e.preventDefault()}),o()(".numberOnly").on("keypress",function(e){if("paste"===e.type)t=e.clipboardData.getData("text/plain");else{var t=e.keyCode||e.which;t=String.fromCharCode(t)}!/[0-9]|\./.test(t)&&(e.returnValue=!1,e.preventDefault&&e.preventDefault())})},[])}},8122:function(e){e.exports={divRow:"account_divRow__pO6AW","d-flex":"account_d-flex__f3tWw","d-flex-between":"account_d-flex-between__auzeR",eleLazyLoad:"account_eleLazyLoad__VtLLO",orderList:"account_orderList__i6_xT",orderListUL:"account_orderListUL__AeTlx",accountProduct:"account_accountProduct__whSVt",productFigure:"account_productFigure__RCIfp",productFigureLoad:"account_productFigureLoad__WfS1T",placeHolderShimmer:"account_placeHolderShimmer__C5LwK",accountNavigation:"account_accountNavigation__0HNF1",isActive:"account_isActive__qHlMD",pageAccountBG:"account_pageAccountBG__uGeBc",pageAccount:"account_pageAccount__4Fhuq",accountContainer:"account_accountContainer__FLs7O",pageHead:"account_pageHead__MCUhQ",profilePhoto:"account_profilePhoto__VFlEY",uploadedImg:"account_uploadedImg__uxBBo",formMessge:"account_formMessge__XbOJf",formBuilder:"account_formBuilder__yP5yI",formGroup:"account_formGroup__YQmTy",formControl:"account_formControl__jCmqq",formAction:"account_formAction__LmRy1",buttonCancel:"account_buttonCancel__j_5iD",buttonSubmit:"account_buttonSubmit__8BOel",addressBook:"account_addressBook__OAfdQ",addressBookList:"account_addressBookList__ctYwp",edit:"account_edit__nxxPB",delete:"account_delete__8MPG1",addressBookNew:"account_addressBookNew__IrLjq",accountListItem:"account_accountListItem__bV5fC",productBody:"account_productBody__NY5zd",bodyContent:"account_bodyContent__c3IsO",orderDates:"account_orderDates__K8iBg",dates:"account_dates__3f04T",label:"account_label___zzSB",date:"account_date___GybF",bodyAction:"account_bodyAction__wEOtN",orderStatus:"account_orderStatus__8YVbK",orderQrCode:"account_orderQrCode__kdI8t",noOrder:"account_noOrder__vrv_D"}},9008:function(e,t,a){e.exports=a(2636)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6345)}),_N_E=e.O()}]);